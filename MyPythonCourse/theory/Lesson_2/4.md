# Вложенные условные конструкции в Python

---

## **1. Что это?**
Вложенные условные конструкции — это **условия внутри других условий**. Они позволяют создавать многоуровневые проверки, где решение зависит от комбинации нескольких условий.

---

## **2. Синтаксис**
```python
if внешнее_условие:
    # Внешний блок
    if внутреннее_условие:
        # Внутренний блок
    else:
        # Альтернативный внутренний блок
else:
    # Блок для внешнего else
```

---

## **3. Пример**
Проверка доступа к контенту на основе возраста и подписки:
```python
age = 25
has_subscription = True

if age >= 18:
    print("Доступ разрешён (возраст)")
    if has_subscription:
        print("Премиум-контент доступен")  # Сработает
    else:
        print("Доступен только базовый контент")
else:
    print("Доступ запрещён (несовершеннолетний)")
```

**Вывод**:
```
Доступ разрешён (возраст)
Премиум-контент доступен
```

---

## **4. Особенности**
- **Уровни вложенности**: В Python нет формального ограничения, но рекомендуется избегать более 3-4 уровней.
- **Отступы**: Каждый вложенный блок требует дополнительного отступа (обычно 4 пробела).
- **Логические операторы**: Иногда вложенные условия можно заменить на `and`/`or`.

**Пример замены вложенности**:
```python
# Вместо:
if x > 0:
    if y < 10:
        print("Условие выполнено")

# Используйте:
if x > 0 and y < 10:
    print("Условие выполнено")
```

---

## **5. Распространённые ошибки**
### **a. Путаница с else**
Блок `else` всегда относится к **ближайшему if** на том же уровне отступов:
```python
if условие1:
    if условие2:
        ...
else:  # Относится к условию1, а не к условию2!
    ...
```

### **b. Избыточная вложенность**
**Плохо**:
```python
if user.is_authenticated:
    if user.has_role("admin"):
        if user.is_active:
            print("Доступ разрешён")
```
**Лучше**:
```python
if user.is_authenticated and user.has_role("admin") and user.is_active:
    print("Доступ разрешён")
```

---

## **6. Советы**
1. **Избегайте глубокой вложенности** (максимум 3-4 уровня).  
2. **Разбивайте сложные условия** на отдельные переменные:
   ```python
   is_adult = age >= 18
   has_access = role == "admin" or is_premium_user
   
   if is_adult and has_access:
       ...
   ```
3. **Используйте guard clauses** (ранний выход из функции при несоблюдении условий):
   ```python
   def process_data(data):
       if not data.is_valid():
           return  # Выход при невалидных данных
       # Основная логика
   ```

---

## **7. Вложенные тернарные операторы**
Допустимы, но ухудшают читаемость:
```python
result = "A" if x > 10 else ("B" if x > 5 else "C")
```
**Эквивалентно**:
```python
if x > 10:
    result = "A"
else:
    if x > 5:
        result = "B"
    else:
        result = "C"
```

---

**Итог**: Вложенные условия — мощный инструмент, но требуют аккуратного использования. Оптимизируйте код, чтобы избежать избыточной сложности.